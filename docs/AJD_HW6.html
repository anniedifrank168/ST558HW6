<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.353">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>AJD_HW6</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


</head>

<body class="fullcontent">

<div id="quarto-search-results"></div>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">AJD_HW6</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="homework-6-annie-difrank" class="level3">
<h3 class="anchored" data-anchor-id="homework-6-annie-difrank">Homework 6 Annie DiFrank</h3>
<section id="task-1-conceptual-questions" class="level4">
<h4 class="anchored" data-anchor-id="task-1-conceptual-questions">Task 1: Conceptual Questions</h4>
<ol type="1">
<li><p>What is the purpose of the lapply() function? What is the equivalent purrr function?</p>
<blockquote class="blockquote">
<p>To quickly/efficiently apply a function to elements of a list.</p>
</blockquote></li>
<li><p>Suppose we have a list called my_list. Each element of the list is a numeric data frame (all columns are numeric). We want use lapply() to run the code cor(numeric_matrix, method = “kendall”) on each element of the list. Write code to do this below! (I’m really trying to ask you how you specify method = “kendall” when calling lapply())</p>
<blockquote class="blockquote">
<p>lapply(x=my_list, FUN=cor, method=“kendall”)</p>
</blockquote></li>
<li><p>What are two advantages of using purrr functions instead of the BaseR apply family?</p>
<blockquote class="blockquote">
<p>Purrr gives a more clean and consistent way to apply functions to objects and have a lot of additional helper functions available.</p>
</blockquote></li>
<li><p>What is a side-effect function?</p>
<blockquote class="blockquote">
<p>Side-effect functions are pipeable functions that do not transform the data, they just produce something/change the state of something (like printing a data frame into the consol or reading in data from a .csv file into an R object)</p>
</blockquote></li>
<li><p>Why can you name a variable sd in a function and not cause any issues with the sd function?</p>
<blockquote class="blockquote">
<p>Because within the function is a separate environment than where the sd function is stored (global environment); when you call a function, it creates a temporary environment that is not stored after the function is done running.</p>
</blockquote></li>
</ol>
</section>
<section id="task-2-writing-r-functions-part-1" class="level4">
<h4 class="anchored" data-anchor-id="task-2-writing-r-functions-part-1">Task 2: Writing R Functions Part 1</h4>
<p>Here we will first write a basic function called getRMSE() that takes in a vector of responses and a vector of predictions and outputs the RMSE. Then, we will test the function.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>getRMSE <span class="ot">&lt;-</span> <span class="cf">function</span>(response_vector,predict_vector,...) {</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>  <span class="co">#Do the squared differences </span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>  temp <span class="ot">&lt;-</span> (response_vector <span class="sc">-</span> predict_vector)<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>  <span class="co">#calculate the mean of the squared differences </span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>  mean_temp <span class="ot">&lt;-</span> <span class="fu">mean</span>(temp, ... )</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>  <span class="co">#calculate RMSE by taking sqrroot of the mean_temp</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>  rmse_value <span class="ot">&lt;-</span> <span class="fu">sqrt</span>(mean_temp)</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(<span class="fu">paste0</span>(<span class="st">"RMSE = "</span>,rmse_value))</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="co">#Creating response and prediction values </span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">10</span>)</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>n <span class="ot">&lt;-</span> <span class="dv">100</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">runif</span>(n)</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>resp <span class="ot">&lt;-</span> <span class="dv">3</span> <span class="sc">+</span> <span class="dv">10</span> <span class="sc">*</span> x <span class="sc">+</span> <span class="fu">rnorm</span>(n)</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>pred <span class="ot">&lt;-</span> <span class="fu">predict</span>(<span class="fu">lm</span>(resp <span class="sc">~</span> x), <span class="fu">data.frame</span>(x))</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a><span class="co">#Testing function </span></span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a><span class="fu">getRMSE</span>(resp,pred,<span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "RMSE = 0.958167655151933"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Repeat after replacing two of the response values with mising values </span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="co">#resp</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>resp[<span class="dv">6</span>] <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>resp[<span class="dv">36</span>] <span class="ot">&lt;-</span><span class="cn">NA</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="co">#Testing with specifying the behavior to deal with missing values </span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="fu">getRMSE</span>(resp,pred,<span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "RMSE = 0.964198261228688"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Testing without specifying the behavior to deal with missing values </span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="fu">getRMSE</span>(resp,pred)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "RMSE = NA"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>  <span class="co">#Must specify the behavior! </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="task-2-writing-r-functions-part-2" class="level4">
<h4 class="anchored" data-anchor-id="task-2-writing-r-functions-part-2">Task 2: Writing R Functions Part 2</h4>
<p>Here, we will write a function called getMAE() that follows the same specifications as above to get the MAE and test it.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>getMAE <span class="ot">&lt;-</span> <span class="cf">function</span>(response_vector,predict_vector,...) {</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="co">#Do the abs. val. of the differences </span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  temp <span class="ot">&lt;-</span> <span class="fu">abs</span>((response_vector <span class="sc">-</span> predict_vector))</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>  <span class="co">#calculate the mean of the abs val </span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>  mae_value <span class="ot">&lt;-</span> <span class="fu">mean</span>(temp, ... )</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(<span class="fu">paste0</span>(<span class="st">"MAE = "</span>,mae_value))</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a><span class="co">#Creating response and prediction values </span></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">10</span>)</span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>n <span class="ot">&lt;-</span> <span class="dv">100</span></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">runif</span>(n)</span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>resp <span class="ot">&lt;-</span> <span class="dv">3</span> <span class="sc">+</span> <span class="dv">10</span> <span class="sc">*</span> x <span class="sc">+</span> <span class="fu">rnorm</span>(n)</span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a>pred <span class="ot">&lt;-</span> <span class="fu">predict</span>(<span class="fu">lm</span>(resp <span class="sc">~</span> x), <span class="fu">data.frame</span>(x))</span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a><span class="co">#Testing function </span></span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a><span class="fu">getMAE</span>(resp,pred,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "MAE = 0.815577593682669"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Repeat after replacing two of the response values with mising values </span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="co">#resp</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>resp[<span class="dv">6</span>] <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>resp[<span class="dv">36</span>] <span class="ot">&lt;-</span><span class="cn">NA</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a><span class="co">#Testing with specifying the behavior to deal with missing values </span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a><span class="fu">getMAE</span>(resp,pred,<span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "MAE = 0.823486211953357"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Testing without specifying the behavior to deal with missing values </span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="fu">getMAE</span>(resp,pred)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "MAE = NA"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>  <span class="co">#Must specify the behavior! </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="task-2-writing-r-functions-part-3" class="level4">
<h4 class="anchored" data-anchor-id="task-2-writing-r-functions-part-3">Task 2 Writing R Functions Part 3</h4>
<p>Here we will write a wrapper function that can be used to get either or both metrics returned with a single function call. The function iwll check that the two vectors passed are numeric, if not a message will print and the function will exit. It will return both metrics by default and include names.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>getRMSE_MAE <span class="ot">&lt;-</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">function</span>(response_vector,</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>           predict_vector,</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>           <span class="at">metric =</span> <span class="fu">c</span>(<span class="st">"both"</span>, <span class="st">"RMSE"</span>, <span class="st">"MAE"</span>),</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>           ...) {</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>    <span class="co">#Checking vectors are numeric</span></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="sc">!</span><span class="fu">is.numeric</span>(response_vector) <span class="sc">||</span> <span class="sc">!</span><span class="fu">is.numeric</span>(predict_vector)) {</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>      <span class="fu">stop</span>(<span class="st">"STOP: input vectors must be numeric"</span>)</span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>    rmse_value <span class="ot">&lt;-</span> <span class="fu">getRMSE</span>(response_vector, predict_vector, ...)</span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a>    mae_value <span class="ot">&lt;-</span> <span class="fu">getMAE</span>(response_vector, predict_vector, ...)</span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a>    <span class="co">#Return based on the chosen metric</span></span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (metric <span class="sc">==</span> <span class="st">"both"</span>) {</span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a>      <span class="fu">return</span>(<span class="fu">list</span>(<span class="at">RMSE =</span> rmse_value, <span class="at">MAE =</span> mae_value))</span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> <span class="cf">if</span> (metric <span class="sc">==</span> <span class="st">"RMSE"</span>) {</span>
<span id="cb15-19"><a href="#cb15-19" aria-hidden="true" tabindex="-1"></a>      <span class="fu">return</span>(rmse_value)</span>
<span id="cb15-20"><a href="#cb15-20" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb15-21"><a href="#cb15-21" aria-hidden="true" tabindex="-1"></a>      <span class="fu">return</span>(mae_value)</span>
<span id="cb15-22"><a href="#cb15-22" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb15-23"><a href="#cb15-23" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb15-24"><a href="#cb15-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-25"><a href="#cb15-25" aria-hidden="true" tabindex="-1"></a><span class="co">#Creating vectors to test</span></span>
<span id="cb15-26"><a href="#cb15-26" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">10</span>)</span>
<span id="cb15-27"><a href="#cb15-27" aria-hidden="true" tabindex="-1"></a>n <span class="ot">&lt;-</span> <span class="dv">100</span></span>
<span id="cb15-28"><a href="#cb15-28" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">runif</span>(n)</span>
<span id="cb15-29"><a href="#cb15-29" aria-hidden="true" tabindex="-1"></a>resp <span class="ot">&lt;-</span> <span class="dv">3</span> <span class="sc">+</span> <span class="dv">10</span> <span class="sc">*</span> x <span class="sc">+</span> <span class="fu">rnorm</span>(n)</span>
<span id="cb15-30"><a href="#cb15-30" aria-hidden="true" tabindex="-1"></a>pred <span class="ot">&lt;-</span> <span class="fu">predict</span>(<span class="fu">lm</span>(resp <span class="sc">~</span> x), <span class="fu">data.frame</span>(x))</span>
<span id="cb15-31"><a href="#cb15-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-32"><a href="#cb15-32" aria-hidden="true" tabindex="-1"></a><span class="co">#Testing function while calling each metric individually</span></span>
<span id="cb15-33"><a href="#cb15-33" aria-hidden="true" tabindex="-1"></a><span class="fu">getRMSE_MAE</span>(resp, pred, <span class="st">"RMSE"</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "RMSE = 0.958167655151933"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">getRMSE_MAE</span>(resp, pred, <span class="st">"MAE"</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "MAE = 0.815577593682669"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Testing while calling both metrics</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="fu">getRMSE_MAE</span>(resp, pred, <span class="st">"both"</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$RMSE
[1] "RMSE = 0.958167655151933"

$MAE
[1] "MAE = 0.815577593682669"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Repeating with replacing two of the response values with missing values</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="co">#resp</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>resp[<span class="dv">6</span>] <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>resp[<span class="dv">36</span>] <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a><span class="fu">getRMSE_MAE</span>(resp, pred, <span class="st">"RMSE"</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "RMSE = 0.964198261228688"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">getRMSE_MAE</span>(resp, pred, <span class="st">"MAE"</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "MAE = 0.823486211953357"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">getRMSE_MAE</span>(resp, pred, <span class="st">"both"</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$RMSE
[1] "RMSE = 0.964198261228688"

$MAE
[1] "MAE = 0.823486211953357"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Testing while passing it incorrect data</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="co">#char_vec = c("A", "B", "C")</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a><span class="co">#getRMSE_MAE(resp, char_vec, "both")</span></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a><span class="co">#my error message displayed because one of the vectors isn't numeric! I commented this out because even though I set error = TRUE in the chunk options it doesn't want to render with this error running. </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="task-3-querying-an-api-and-a-tidy-style-function" class="level4">
<h4 class="anchored" data-anchor-id="task-3-querying-an-api-and-a-tidy-style-function">Task 3: Querying an API and a Tidy-Style Function</h4>
<p>Here, we will connect to the news API and return information about an interesting topic.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(httr)</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(jsonlite)</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'dplyr'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:stats':

    filter, lag</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:base':

    intersect, setdiff, setequal, union</code></pre>
</div>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(purrr)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'purrr'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following object is masked from 'package:jsonlite':

    flatten</code></pre>
</div>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'lubridate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:base':

    date, intersect, setdiff, union</code></pre>
</div>
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co">#1. Grabbing information about the recent top headlines</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>top_headlines <span class="ot">&lt;-</span></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">GET</span>(</span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"https://newsapi.org/v2/top-headlines?country=us&amp;apiKey=1934ad1d9d784a7f9e6da0472528e364"</span></span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(top_headlines, <span class="at">max.level =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>List of 10
 $ url        : chr "https://newsapi.org/v2/top-headlines?country=us&amp;apiKey=1934ad1d9d784a7f9e6da0472528e364"
 $ status_code: int 200
 $ headers    :List of 14
  ..- attr(*, "class")= chr [1:2] "insensitive" "list"
 $ all_headers:List of 1
 $ cookies    :'data.frame':    0 obs. of  7 variables:
 $ content    : raw [1:16611] 7b 22 73 74 ...
 $ date       : POSIXct[1:1], format: "2024-10-09 16:06:02"
 $ times      : Named num [1:6] 0 0.00233 0.03413 0.07379 0.15413 ...
  ..- attr(*, "names")= chr [1:6] "redirect" "namelookup" "connect" "pretransfer" ...
 $ request    :List of 7
  ..- attr(*, "class")= chr "request"
 $ handle     :Class 'curl_handle' &lt;externalptr&gt; 
 - attr(*, "class")= chr "response"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co">#2. parsing content</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>parsed_TH <span class="ot">&lt;-</span> <span class="fu">fromJSON</span>(<span class="fu">rawToChar</span>(top_headlines<span class="sc">$</span>content))</span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>parsed_TH <span class="co">#articles is the element we want for the data</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$status
[1] "ok"

$totalResults
[1] 34

$articles
          source.id         source.name
1              &lt;NA&gt; Yahoo Entertainment
2  associated-press    Associated Press
3              &lt;NA&gt;           [Removed]
4              &lt;NA&gt;       Post Magazine
5              &lt;NA&gt;             Variety
6              &lt;NA&gt; Yahoo Entertainment
7          nbc-news            NBC News
8              &lt;NA&gt;     Arrowhead Pride
9           reuters             Reuters
10             &lt;NA&gt;                 NPR
11             &lt;NA&gt;      Whitehouse.gov
12         cbs-news            CBS News
13        bloomberg           Bloomberg
14             &lt;NA&gt;           Space.com
15              cnn                 CNN
16             &lt;NA&gt;       NBCSports.com
17             &lt;NA&gt;           MacRumors
18              cnn                 CNN
19             &lt;NA&gt;      9News.com KUSA
20             &lt;NA&gt;       Eurogamer.net
                                                  author
1                                        Alexandra Canal
2                             TERRY SPENCER, HAVEN DALEY
3                                                   &lt;NA&gt;
4                                                   &lt;NA&gt;
5                                         Tatiana Siegel
6                                            Liz Roscher
7                                           Daniel Arkin
8                                           Tom Ruprecht
9                         Niklas Pollard, Johan Ahlander
10                                                      
11                                       The White House
12                                         Melissa Quinn
13 Carmen Reinicke, Olivia Carville, Cecilia D'Anastasio
14                                             Mike Wall
15                                     Jacqueline Howard
16                                           Mike Florio
17                                     Mitchel Broussard
18                                                  &lt;NA&gt;
19                                        Alexander Kirk
20                                          Tom Phillips
                                                                                                                               title
1                                                    Stock market today: S&amp;P 500, Nasdaq climb as oil prices retreat - Yahoo Finance
2                   Tampa Bay hasn’t been hit directly by a major hurricane since 1921. Milton may be the one - The Associated Press
3                                                                                                                          [Removed]
4                        With economic-growth faith, China to front-load 100 billion yuan: as it happened - South China Morning Post
5       Inside the ‘Joker: Folie à Deux’ Debacle: Todd Phillips ‘Wanted Nothing to Do’ With DC on the $200 Million Misfire - Variety
6           Jets fire head coach Robert Saleh after 20-36 record over 3-plus seasons: 'We are not where we should be' - Yahoo Sports
7                                                Fourteen AGs sue TikTok, accusing it of harming children’s mental health - NBC News
8                                                       8 things overheard as the Chiefs beat the Saints in Week 5 - Arrowhead Pride
9                                            Nobel physics prize 2024 won by AI pioneers John Hopfield and Geoffrey Hinton - Reuters
10                                                     A jellyfish with a superpower - it can fuse with another and become one - NPR
11 Statement from White House Press Secretary Karine Jean-Pierre on President Biden’s Travel to Germany and Angola - The White House
12                                        Listen Live: Supreme Court hears arguments in challenge to ATF's ghost gun rule - CBS News
13                                                             Roblox Tumbles as Hindenburg Bets Against Gaming Platform - Bloomberg
14                                 SpaceX rocket snaps amazing views of Earth during Hera asteroid probe launch (photos) - Space.com
15 Certain arm positions commonly used for blood pressure checks may lead to inaccurate results. Here’s the right way to do it - CNN
16                                                                                 PFT’s Week 6 2024 NFL power rankings - NBC Sports
17                                                            The Best Prime Day Deals on AirPods, Apple Watch, and More - MacRumors
18                                                                     China penalizes European brandy in tit-for-tat response - CNN
19                                                                        Coldplay announces Denver stadium concert - 9News.com KUSA
20             Behind the scenes at Blizzard: Jason Schreier talks misconduct, swingers parties and what press got wrong - Eurogamer
                                                                                                                                                                                                                                                            description
1                                                                                                                                                                        The focus is back on the ongoing debate over the economy and interest rates as headwinds ease.
2  Hurricane Milton remains a ferocious storm that could land a rare direct hit on the populous Tampa Bay region with towering storm surges and turn debris from Helene’s recent devastation into projectiles. Almost the entirety of Florida’s west coast is under a …
3                                                                                                                                                                                                                                                             [Removed]
4                                                                                                                                      China’s top economic planner, the National Development and Reform Commission (NDRC), held a press conference on Tuesday morning.
5                                                                                                                             Todd Phillips “wanted nothing to do with DC” during the making of the film and refused to test screen the $200 million comic book sequel.
6                                                                                                                                                                                                                                             Saleh is out in New York.
7                                                                                                 Fourteen attorneys general filed lawsuits accusing the social media platform TikTok of damaging young users’ mental health and collecting their data without consent.
8                                                                                                                               If you listened very carefully, fascinating things were being said as the Kansas City Chiefs defeated the New Orleans Saints in Week 5.
9                                          U.S. scientist John Hopfield and British-Canadian Geoffrey Hinton won the 2024 Nobel Prize in Physics on Tuesday for discoveries and inventions in machine learning that paved the way for the artificial intelligence boom.
10                                                        Researchers found that two individuals of a type of comb jelly can fuse and become one with a shared nervous system and digestive system — which has implications for animal regeneration and immune systems.
11                                                                                                           Given the projected trajectory and strength of Hurricane Milton, President Biden is postponing his upcoming trip to Germany and Angola in order to oversee
12                                                                                                                 The rule issued by the Biden administration in 2022 seeks to subject unserialized ghost guns to the same requirements as commercially made firearms.
13                                                                                                                                            Roblox Corp. shares slumped Tuesday after short seller Hindenburg Research said it’s betting against the gaming platform.
14                                                                                                                                                                                               A Falcon 9 upper stage got some gorgeous, faraway looks at our planet.
15 A new study found that having your arm in the wrong position during blood pressure checks — either at home or the doctor’s office — can result in readings “markedly higher” than when your arm is in the recommended position: appropriately supported on a table …
16                                                                                                                                                                                                                                                                   1.
17                                                                                                                   Amazon's Prime Big Deal Days event is in full swing today, offering customers the first chance to get some holiday shopping done early. Similar...
18                                  China&nbsp;imposed temporary anti-dumping measures on brandy imports from the European Union on Tuesday, hitting brands from Hennessy to Remy Martin, after the 27-state bloc voted for tariffs on Chinese-made electric vehicles (EVs).
19                                                                                                                         Coldplay promises a show bursting with lasers, fireworks and LED wristbands at the group's first-ever concert at Empower Field at Mile High.
20                                                                                                                                             Few video game companies hold such a personal connection to fans as Blizzard. Now, imagine how deep that connection run…
                                                                                                                                                                                         url
1                                                                            https://finance.yahoo.com/news/live/stock-market-today-sp-500-nasdaq-climb-as-oil-prices-retreat-133050884.html
2                                                                                                 https://apnews.com/article/hurricane-milton-florida-tampa-7678939c52fdf00da748937d22df1fac
3                                                                                                                                                                        https://removed.com
4                                                                        https://www.scmp.com/economy/policy/article/3281464/chinas-top-economic-planner-set-unveil-wide-ranging-action-plan
5                                                                                      https://variety.com/2024/film/news/joker-folie-a-deux-bombs-what-went-wrong-todd-phillips-1236170946/
6                                               https://sports.yahoo.com/jets-fire-head-coach-robert-saleh-after-20-36-record-in-3-plus-seasons-we-are-not-where-we-should-be-141224637.html
7                                                                                                         https://www.nbcnews.com/tech/tech-news/tiktok-sued-14-attorneys-general-rcna174395
8                                                                                          https://www.arrowheadpride.com/2024/10/8/24265194/chiefs-beat-saints-8-things-overheard-in-week-5
9                                                                                                   https://www.reuters.com/science/hopfield-hinton-win-2024-nobel-prize-physics-2024-10-08/
10                                                                                                      https://www.npr.org/2024/10/08/nx-s1-5144689/comb-jelly-superpower-absorb-become-one
11 https://www.whitehouse.gov/briefing-room/statements-releases/2024/10/08/statement-from-white-house-press-secretary-karine-jean-pierre-on-president-bidens-travel-to-germany-and-angola-2/
12                                                                                                                       https://www.cbsnews.com/news/supreme-court-ghost-gun-atf-arguments/
13                                                                              https://www.bloomberg.com/news/articles/2024-10-08/roblox-tumbles-as-hindenburg-bets-against-gaming-platform
14                                                                                                                            https://www.space.com/spacex-falcon-9-hera-launch-earth-photos
15                                                                                               https://www.cnn.com/2024/10/07/health/blood-pressure-arm-position-study-wellness/index.html
16                                                                                         https://www.nbcsports.com/nfl/profootballtalk/rumor-mill/news/pfts-week-6-2024-nfl-power-rankings
17                                                                                                               https://www.macrumors.com/2024/10/08/the-best-prime-day-deals-october-2024/
18                                                                                                           https://www.cnn.com/2024/10/08/business/china-eu-brandy-evs-hnk-intl/index.html
19                                        https://www.9news.com/article/life/style/colorado-guide/coldplay-denver-empower-field-stadium-concert-tour/73-df7f49f0-5d33-4be8-9e4d-840c328dfd77
20                                                         https://www.eurogamer.net/behind-the-scenes-at-blizzard-jason-schreier-talks-misconduct-swingers-parties-and-what-press-got-wrong
                                                                                                                                                                                                                                                                                                                      urlToImage
1                                                                                                                                                                                                                                                               https://s.yimg.com/cv/apiv2/social/images/yahoo_default_logo.png
2                                                                                          https://dims.apnews.com/dims4/default/b1c8f7e/2147483647/strip/true/crop/6831x3842+0+356/resize/1440x810!/quality/90/?url=https%3A%2F%2Fassets.apnews.com%2F0e%2Ff9%2F216c60a0c6ea2b2dd9fe2513387c%2Fff302b91b5c3443ba0845c249b86f2ce
3                                                                                                                                                                                                                                                                                                                           &lt;NA&gt;
4                                                                                                                                           https://cdn.i-scmp.com/sites/default/files/styles/og_image_scmp_live/public/d8/images/canvas/2024/10/08/e37cc666-99e3-4904-a2b3-36487e54c4e9_be5b3b85.jpg?itok=VuFRTV4u&amp;v=1728371874
5                                                                                                                                                                                                                                           https://variety.com/wp-content/uploads/2024/10/MCDJOFO_WB037.jpg?w=1000&amp;h=563&amp;crop=1
6                                                                                                                                  https://s.yimg.com/ny/api/res/1.2/ywXsMOt5MbTiME97E7qUiQ--/YXBwaWQ9aGlnaGxhbmRlcjt3PTEyMDA7aD04MDA-/https://s.yimg.com/os/creatr-uploaded-images/2024-10/82854e90-857f-11ef-b1dd-46212dd566a0
7                                                                                                                                                                               https://media-cldnry.s-nbcnews.com/image/upload/t_nbcnews-fp-1200-630,f_auto,q_auto:best/rockcms/2024-10/241007-tiktok-office-ew-521p-a8f604.jpg
8                                                                                                                                                                 https://cdn.vox-cdn.com/thumbor/VmGkCrA6v0AYMVDtQMUJPMqygDM=/0x101:4121x2259/fit-in/1200x630/cdn.vox-cdn.com/uploads/chorus_asset/file/25664452/2177349625.jpg
9                                                                                                                                           https://www.reuters.com/resizer/v2/BU4YS7SP4NM6RB32HHZHVVHR4E.jpg?auth=498b2a3f99d12551f7c68a0c7d9c8d74a551aef76fba56252a53c9fc47ff792c&amp;height=1005&amp;width=1920&amp;quality=80&amp;smart=true
10                                                                                                     https://npr.brightspotcdn.com/dims3/default/strip/false/crop/3000x1688+0+1156/resize/1400/quality/100/format/jpeg/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2Fa7%2F40%2F14da44a842fabc342e134aea38ec%2Fphoto2.jpg
11                                                                                                                                                                                                                                                     https://www.whitehouse.gov/wp-content/uploads/2021/01/wh_social-share.png
12                                                                                                   https://assets1.cbsnewsstatic.com/hub/i/r/2023/09/27/637d1d47-f747-4102-bc37-b97848531b3c/thumbnail/1200x630/d7f95626ab8f5a75ef394a574d065b8c/ghost-guns-raw-hi-res-still-00-01-1819.jpg?v=3a0e65dbe151135b3f2e1627f423e21b
13                                                                                                                                                                                                                                                 https://assets.bwbx.io/images/users/iqjWHBFdfxIU/iCd9FLDYE3Qc/v1/1200x800.jpg
14                                                                                                                                                                                                                                                          https://cdn.mos.cms.futurecdn.net/FtWKyWbwtbLgGjFU4az4ic-1200-80.jpg
15                                                                                                                                                             https://media.cnn.com/api/v1/images/stellar/prod/151110164035-blood-pressure-explainer-elizabeth-cohen-mss-orig-00010117.jpg?q=x_0,y_0,h_1080,w_1919,c_fill/w_800
16 https://nbcsports.brightspotcdn.com/dims4/default/b377d28/2147483647/strip/true/crop/5532x3112+0+0/resize/1440x810!/quality/90/?url=https%3A%2F%2Fnbc-sports-production-nbc-sports.s3.us-east-1.amazonaws.com%2Fbrightspot%2F9e%2F18%2F54d5b159411f962f0c133c354fba%2Fhttps-delivery-gettyimages.com%2Fdownloads%2F2177350326
17                                                                                                                                                                                                          https://images.macrumors.com/t/6xx5s2m-0sFwQYwdop7ZKKkyJWY=/2500x/article-new/2024/10/Prime-Big-Deal-Days-Hero-5.jpg
18                                                                                                                                                                                                                             https://media.cnn.com/api/v1/images/stellar/prod/gettyimages-1125283731.jpg?c=16x9&amp;q=w_800,c_fill
19                                                                                                                                                                             https://media.9news.com/assets/KUSA/images/f5f00407-5e1d-4524-a895-4ee86b2334f5/20241008T113710/f5f00407-5e1d-4524-a895-4ee86b2334f5_1140x641.jpg
20                                                                                                                                                                                                                    https://assetsio.gnwcdn.com/Untitled-1_O2B9y7a.jpg?width=1200&amp;height=630&amp;fit=crop&amp;enable=upscale&amp;auto=webp
            publishedAt
1  2024-10-08T16:10:00Z
2  2024-10-08T16:04:00Z
3  2024-10-08T15:47:00Z
4  2024-10-08T15:41:20Z
5  2024-10-08T15:15:00Z
6  2024-10-08T15:13:54Z
7  2024-10-08T14:55:12Z
8  2024-10-08T14:51:52Z
9  2024-10-08T14:46:16Z
10 2024-10-08T14:30:52Z
11 2024-10-08T14:14:26Z
12 2024-10-08T14:13:09Z
13 2024-10-08T14:00:46Z
14 2024-10-08T14:00:33Z
15 2024-10-08T13:35:00Z
16 2024-10-08T13:17:58Z
17 2024-10-08T12:19:10Z
18 2024-10-08T12:04:00Z
19 2024-10-08T11:52:00Z
20 2024-10-08T11:46:50Z
                                                                                                                                                                                                                      content
1    US stocks opened higher on Tuesday as investors welcomed a pullback in surging oil prices, putting focus back on the ongoing debate over the economy and interest rates.\r\nThe benchmark S&amp;amp;P 500 (^G… [+7220 chars]
2      TAMPA, Fla. (AP) Hurricane Milton weakened slightly Tuesday but remained a ferocious storm that could land a once-in-a-century direct hit on the populous Tampa Bay region with towering storm surges a… [+7699 chars]
3                                                                                                                                                                                                                   [Removed]
4       This live blog has been made freely available as a public service to our readers. Please consider supporting SCMPs journalism bysubscribing. Get faster notifications on the latest updates bydownloadi… [+371 chars]
5      On Sept. 30, Lady Gaga blew kisses to fans outside the TCL Chinese Theatre ahead of the premiere of “Joker: Folie à Deux,” while Joaquin Phoenix dropped his typical solemn facade and flashed a few sm… [+7449 chars]
6    The New York Jets have fired head coach Robert Saleh.\r\nAccording to ESPN's Adam Schefter, the Jets told Saleh around 10 a.m. ET. Team owner Woody Johnson released a statement about firing Saleh a sho… [+2203 chars]
7      Fourteen attorneys general, led by officials in New York and California, filed lawsuits Tuesday accusing the social media platform TikTok of damaging young users mental health and collecting their da… [+4316 chars]
8                                                                                                                                                                                                                        &lt;NA&gt;
9                                                                                                                                                                                                                        &lt;NA&gt;
10 A little more than a year ago, while biologist Kei Jokura\r\n was in Woods Hole, Mass., he routinely walked down to the water, scanning for comb jellies.\r\nThey look like a jellyfish, he says, but theyr… [+3077 chars]
11      Given the projected trajectory and strength of Hurricane Milton, President Biden is postponing his upcoming trip to Germany and Angola in order to oversee preparations for and the response to Hurrica… [+107 chars]
12     Washington — The Supreme Court&nbsp;is hearing arguments&nbsp;Tuesday over the Biden administration's efforts to regulate unserialized firearms called ghost guns, considering for the second time in a matter of… [+5942 chars]
13    Roblox Corp. shares slumped Tuesday after short seller Hindenburg Research said its betting against the gaming platform. \r\nThe stock fell as much as 9.4% in intraday trading Tuesday in New York, hitt… [+113 chars]
14   A SpaceX Falcon 9 rocket snapped a pretty special in-space selfie on Monday (Oct. 7).\r\nThe shot, captured during the launch of the European Space Agency's Hera asteroid-inspecting mission, shows a go… [+2231 chars]
15     A new study found that having your arm in the wrong position during blood pressure checks either at home or the doctors office can result in readings markedly higher than when your arm is in the reco… [+8994 chars]
16   1. Chiefs (last week No. 1; 5-0): The official 2024 slogan is Sluggish At Times But Always Inevitable.\r\n2. Lions (No. 2; 3-1): Hopefully, Dan Skipper spent the bye week practicing his reporting-as-el… [+2909 chars]
17     Amazon's Prime Big Deal Days event is in full swing today, offering customers the first chance to get some holiday shopping done early. Similar to the first Prime Day, it will last for two days (Octo… [+5683 chars]
18     China&nbsp;imposed temporary anti-dumping measures on brandy imports from the European Union on Tuesday, hitting brands from Hennessy to Remy Martin, after the 27-state bloc voted for tariffs on Chinese-m… [+3374 chars]
19 DENVER Coldplay is coming back to Colorado.\r\nThe band announced its record-breaking "Music Of The Spheres World Tour"&nbsp;will continue with 10 new North American shows in 2025.\r\nThe new dates include Co… [+1779 chars]
20    Few video game companies hold such a personal connection to fans as Blizzard. Now, imagine how deep that connection runs if you worked there. For the many thousands of staff who sweated to build Worl… [+19165 chars]</code></pre>
</div>
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>topheads <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(<span class="fu">pluck</span>(parsed_TH, <span class="st">"articles"</span>))</span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a><span class="co">#3. Writing a quick function to easily query this API; inputs are whether you want everything or just top headlines, the title/subject to search for (string),a time period to search from (string- youll search from that time until present), and an API key</span></span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>getAPI <span class="ot">&lt;-</span></span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a>  <span class="cf">function</span>(<span class="at">headlines =</span> <span class="fu">c</span>(<span class="st">"top-headlines?country=us"</span>, <span class="st">"everything?"</span>),</span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a>           <span class="at">title =</span> <span class="cn">NULL</span>,</span>
<span id="cb42-7"><a href="#cb42-7" aria-hidden="true" tabindex="-1"></a>           <span class="at">time =</span> <span class="cn">NULL</span>,</span>
<span id="cb42-8"><a href="#cb42-8" aria-hidden="true" tabindex="-1"></a>           APIkey) {</span>
<span id="cb42-9"><a href="#cb42-9" aria-hidden="true" tabindex="-1"></a>    beginningURL <span class="ot">&lt;-</span> <span class="st">"https://newsapi.org/v2/"</span></span>
<span id="cb42-10"><a href="#cb42-10" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb42-11"><a href="#cb42-11" aria-hidden="true" tabindex="-1"></a>    <span class="co">#USER NOTES:</span></span>
<span id="cb42-12"><a href="#cb42-12" aria-hidden="true" tabindex="-1"></a>    <span class="co"># must include q= in 'title' argument, followed by &amp;</span></span>
<span id="cb42-13"><a href="#cb42-13" aria-hidden="true" tabindex="-1"></a>    <span class="co">#must include total time string (format: from=STARTDATE&amp;to=ENDDATE)</span></span>
<span id="cb42-14"><a href="#cb42-14" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb42-15"><a href="#cb42-15" aria-hidden="true" tabindex="-1"></a>    url <span class="ot">&lt;-</span> <span class="fu">paste0</span>(beginningURL, headlines, title, time, <span class="st">"&amp;apiKey="</span>, APIkey)</span>
<span id="cb42-16"><a href="#cb42-16" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb42-17"><a href="#cb42-17" aria-hidden="true" tabindex="-1"></a>    temp <span class="ot">&lt;-</span> <span class="fu">GET</span>(url)</span>
<span id="cb42-18"><a href="#cb42-18" aria-hidden="true" tabindex="-1"></a>    parsed <span class="ot">&lt;-</span> <span class="fu">fromJSON</span>(<span class="fu">rawToChar</span>(temp<span class="sc">$</span>content))</span>
<span id="cb42-19"><a href="#cb42-19" aria-hidden="true" tabindex="-1"></a>    data <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(<span class="fu">pluck</span>(parsed, <span class="st">"articles"</span>))</span>
<span id="cb42-20"><a href="#cb42-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(data)</span>
<span id="cb42-21"><a href="#cb42-21" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb42-22"><a href="#cb42-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-23"><a href="#cb42-23" aria-hidden="true" tabindex="-1"></a><span class="co">#Using function to grab my data from above</span></span>
<span id="cb42-24"><a href="#cb42-24" aria-hidden="true" tabindex="-1"></a><span class="fu">getAPI</span>(<span class="at">headlines =</span> <span class="st">"top-headlines?country=us"</span>, <span class="at">APIkey =</span> <span class="st">"1934ad1d9d784a7f9e6da0472528e364"</span>) <span class="ot">-&gt;</span> topheads</span>
<span id="cb42-25"><a href="#cb42-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-26"><a href="#cb42-26" aria-hidden="true" tabindex="-1"></a><span class="co">#Using function to grab data on Apple/ using all of the options of my function</span></span>
<span id="cb42-27"><a href="#cb42-27" aria-hidden="true" tabindex="-1"></a><span class="fu">getAPI</span>(</span>
<span id="cb42-28"><a href="#cb42-28" aria-hidden="true" tabindex="-1"></a>  <span class="at">headlines =</span> <span class="st">"everything?"</span>,</span>
<span id="cb42-29"><a href="#cb42-29" aria-hidden="true" tabindex="-1"></a>  <span class="at">title =</span> <span class="st">"q=apple&amp;"</span>,</span>
<span id="cb42-30"><a href="#cb42-30" aria-hidden="true" tabindex="-1"></a>  <span class="at">time =</span> <span class="st">"from=2024-10-08&amp;to=2024-10-08"</span>,</span>
<span id="cb42-31"><a href="#cb42-31" aria-hidden="true" tabindex="-1"></a>  <span class="at">APIkey =</span> <span class="st">"1934ad1d9d784a7f9e6da0472528e364"</span></span>
<span id="cb42-32"><a href="#cb42-32" aria-hidden="true" tabindex="-1"></a>) <span class="ot">-&gt;</span> appledata</span>
<span id="cb42-33"><a href="#cb42-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-34"><a href="#cb42-34" aria-hidden="true" tabindex="-1"></a><span class="co">#4. Summaring name source via a contingency table</span></span>
<span id="cb42-35"><a href="#cb42-35" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(appledata<span class="sc">$</span>source<span class="sc">$</span>name)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
          [Removed]             9to5Mac   Android Authority     Android Central 
                  5                  18                   2                   4 
     Android Police        AppleInsider      Applesfera.com            Buzzfeed 
                  1                  11                   4                   1 
               CNET      Digital Trends         Gizmodo.com        heise online 
                 11                   3                  12                   2 
       Hipertextual           HYPEBEAST                 IGN     Journal du geek 
                  1                   1                   1                   4 
          MacRumors        Slashdot.org           The Verge       Thekitchn.com 
                 11                   1                   2                   1 
         Xataka.com Yahoo Entertainment 
                  1                   3 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="co">#5. turning the publishedAt column into a date column using the lubridate package, sorting the two data frames each by their new parsed date column, and creating a new variable called pub_diff that is the difference in time between the articles' published dates. saving the mods as new dataframes.</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a><span class="co">#Creating data columns, sorting by them</span></span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>timed_apple <span class="ot">&lt;-</span></span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a>  appledata <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">date =</span> <span class="fu">ymd_hms</span>(publishedAt)) <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(., date) <span class="sc">%&gt;%</span> <span class="fu">select</span>(date, <span class="fu">everything</span>())</span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a>timed_topheadlines <span class="ot">&lt;-</span></span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true" tabindex="-1"></a>  topheads <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">date =</span> <span class="fu">ymd_hms</span>(publishedAt)) <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(., date) <span class="sc">%&gt;%</span> <span class="fu">select</span>(date, <span class="fu">everything</span>())</span>
<span id="cb44-8"><a href="#cb44-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-9"><a href="#cb44-9" aria-hidden="true" tabindex="-1"></a>  <span class="co">#Creating pub_diff</span></span>
<span id="cb44-10"><a href="#cb44-10" aria-hidden="true" tabindex="-1"></a>timed_apple <span class="ot">&lt;-</span></span>
<span id="cb44-11"><a href="#cb44-11" aria-hidden="true" tabindex="-1"></a>  timed_apple <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">pub_diff =</span> date <span class="sc">-</span> <span class="fu">lag</span>(date)) <span class="sc">%&gt;%</span> <span class="fu">select</span>(date, pub_diff, <span class="fu">everything</span>())</span>
<span id="cb44-12"><a href="#cb44-12" aria-hidden="true" tabindex="-1"></a>timed_topheadlines <span class="ot">&lt;-</span></span>
<span id="cb44-13"><a href="#cb44-13" aria-hidden="true" tabindex="-1"></a>  timed_topheadlines <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">pub_diff =</span> date <span class="sc">-</span> <span class="fu">lag</span>(date)) <span class="sc">%&gt;%</span> <span class="fu">select</span>(date, pub_diff, <span class="fu">everything</span>())</span>
<span id="cb44-14"><a href="#cb44-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-15"><a href="#cb44-15" aria-hidden="true" tabindex="-1"></a><span class="co">#6. Subsetting and calling map() with a custom anonymous function</span></span>
<span id="cb44-16"><a href="#cb44-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-17"><a href="#cb44-17" aria-hidden="true" tabindex="-1"></a>  <span class="co">#apple data</span></span>
<span id="cb44-18"><a href="#cb44-18" aria-hidden="true" tabindex="-1"></a>timed_apple_subset <span class="ot">&lt;-</span> timed_apple <span class="sc">%&gt;%</span> <span class="fu">select</span>(date, pub_diff)</span>
<span id="cb44-19"><a href="#cb44-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-20"><a href="#cb44-20" aria-hidden="true" tabindex="-1"></a>TAS_summary <span class="ot">&lt;-</span> <span class="fu">map</span>(timed_apple_subset, \(x) <span class="fu">list</span>(</span>
<span id="cb44-21"><a href="#cb44-21" aria-hidden="true" tabindex="-1"></a>  <span class="at">mean =</span> <span class="fu">mean</span>(x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb44-22"><a href="#cb44-22" aria-hidden="true" tabindex="-1"></a>  <span class="at">sd =</span> <span class="fu">sd</span>(x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb44-23"><a href="#cb44-23" aria-hidden="true" tabindex="-1"></a>          <span class="at">median =</span> <span class="fu">median</span>(x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb44-24"><a href="#cb44-24" aria-hidden="true" tabindex="-1"></a>))</span>
<span id="cb44-25"><a href="#cb44-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-26"><a href="#cb44-26" aria-hidden="true" tabindex="-1"></a>TAS_summary</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$date
$date$mean
[1] "2024-10-08 13:19:23 UTC"

$date$sd
[1] 18292.85

$date$median
[1] "2024-10-08 13:34:06 UTC"


$pub_diff
$pub_diff$mean
Time difference of 871.9394 secs

$pub_diff$sd
[1] 1262.345

$pub_diff$median
Time difference of 445 secs</code></pre>
</div>
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>  <span class="co">#top headlines data</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>timed_topheads_subset <span class="ot">&lt;-</span> timed_topheadlines <span class="sc">%&gt;%</span> <span class="fu">select</span>(date, pub_diff)</span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>TTS_summary <span class="ot">&lt;-</span> <span class="fu">map</span>(timed_topheads_subset, \(x) <span class="fu">list</span>(</span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">mean =</span> <span class="fu">mean</span>(x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">sd =</span> <span class="fu">sd</span>(x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb46-7"><a href="#cb46-7" aria-hidden="true" tabindex="-1"></a>          <span class="at">median =</span> <span class="fu">median</span>(x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb46-8"><a href="#cb46-8" aria-hidden="true" tabindex="-1"></a>))</span>
<span id="cb46-9"><a href="#cb46-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-10"><a href="#cb46-10" aria-hidden="true" tabindex="-1"></a>TTS_summary</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$date
$date$mean
[1] "2024-10-08 14:13:57 UTC"

$date$sd
[1] 4973.022

$date$median
[1] "2024-10-08 14:22:39 UTC"


$pub_diff
$pub_diff$mean
Time difference of 831.0526 secs

$pub_diff$sd
[1] 807.7366

$pub_diff$median
Time difference of 743 secs</code></pre>
</div>
</div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>